<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
</head>
<body>
    <ul>
        <li>I am Siabonga Nomwete</li>
        <li>You are Siabonga Nomwete</li>
    </ul>
    <div>
        <p>Siabonga Nomwete</p>
    </div>
    <script>
        var domWorker = (function () {
            var elementsArray = [];
            var nodesArray = [];
            var bufferCounter = 0;

            function addElementToPerrent(selector, element, text) {
                var someElement = document.querySelector(selector);
                var node = document.createElement(element);
                node.innerHTML = text;
                someElement.appendChild(node);
            }

            function removeElement(selector) {
                var someElement = document.querySelector(selector);
                someElement.parentNode.removeChild(someElement);
            }

            function eventAttach(selector, eventType, eventHandler) {
                document.querySelector(selector).addEventListener(eventType, eventHandler, false);
            }

            function appendToBuffer(selector, element, count, text) {
                elementsArray.push(document.querySelector(selector));

                for (var c = bufferCounter; c < count + bufferCounter; c++) {
                    nodesArray.push(document.createElement(element));
                    nodesArray[c].innerHTML = text;
                }

                bufferCounter += count;

                if (bufferCounter >= 100) {
                    for (var i = 0; i < elementsArray.length; i++) {
                        for (var c = 0; c < nodesArray.length; c++) {
                            elementsArray[i].appendChild(nodesArray[c]);
                        }
                    }
                }
            }
    
            return {
                appendToBuffer: appendToBuffer,
                addElementToPerrent: addElementToPerrent,
                removeElement: removeElement,
                eventAttach: eventAttach,
                getElement: function (selector) {
                    return document.querySelector(selector);
                },
                getElements: function (selector) {
                    return document.querySelectorAll(selector);
                }
            };
        })();

        domWorker.addElementToPerrent("div", "p", "This is new !");
        domWorker.eventAttach("p", 'click', function () {
            alert('Clicked');
        })

        for (var i = 0; i < 100; i++) {
            domWorker.appendToBuffer("div", "p", 1, "Siabonga");
            domWorker.appendToBuffer("div", "p", 1, "Nomwete");
        }
    </script>
</body>
</html>
